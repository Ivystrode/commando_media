{% extends 'main/base.html' %}
{% load static %}
{% load crispy_forms_tags %}
<head>
{% block css %}
<link rel="stylesheet" href="{% static 'css/notices.css' %}">
{% endblock %}

{% block title %}{{notice.title}}{% endblock %}
{% block page_title %}{{notice.title}}{% endblock %}
{% block subtitle %}Posted by <a class="profile-link" href="/profile/{{notice.created_by}}">{{notice.created_by}}</a> at: {{notice.time}}{% endblock %}
</head>
{% block content %}     

    <body>
        <div class="page-body">

            <div id="buttons">
                <a href="/notices" id="notice-button" class="ui secondary button">All notices</a>
            </div>

            <div class="notice ui two column grid">
                
                <div id="main-notice-section" class="column">
                    <div class="noticepara column" id="intro">
                        <div class="imgcolumn">
                            <div id="img1">
                                <img id="noticeimage1" class="ui medium rounded image" src="{{notice.image.url}}">
                            </div>
                        </div>
                        {% if notice.body != 'None' %}
                        <p>{{notice.body | linebreaks}}</p>
                        {% elif notice.body == None %}
                        <p>No text body found</p>
                        {% else %}
                        <p>No text body found</p>
                        {% endif %}
                        
                    </div>
                </div>
        
                <div class="comments column">
                    <div id="comments-section" class="ui one column grid">
                        <div class="column">
                            {% for comment in notice.noticecomments.all %}
                            <div class="parent-comment">
                                <div class="comment-author">
                                    <p><strong><a class="profile-link" href="/profile/{{comment.author}}">{{comment.author}}</a> | {{comment.time}}:</strong></p>
                                </div>
                                <div class="comment-body">
                                    <p>{{comment.body | linebreaks}}</p>
                                </div>
                            </div>
                            {% endfor %}
                            <div id="comment-post-button">
                                <button class="ui secondary button" onclick="showCommentForm()">POST COMMENT</button>
                            </div>
                            <div id="comment-form">
                                <form method="post">
                                    {{form | crispy}}
                                    {% csrf_token %}
                                    <button class="ui secondary button" onclick="closeCommentBox()">Close</button>
                                    <button type="submit" class="ui secondary button">Post</button>                        
                                </form>
                            </div>
                        </div>
        
                    </div>
        
        
        
        
        
        
        
        
        
        
        
                </div>
        
            </div>


        </div>
        
    </body>
    

{% endblock %}
{% block script %}<script src="{% static 'scripts/js/notices.js' %}"></script>{% endblock %}